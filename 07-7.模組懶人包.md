# 模組懶人包

這裡我們先快速帶過模組、路徑、`use` 關鍵字以及 `pub` 關鍵字在編譯器中是怎麼運作的，以及多數開發者會怎麼組織他們的程式碼。我們會在此章節透過範例逐一介紹，不過這裡能讓你快速理解模組是怎麼運作的。

- **從 crate 源頭開始**：在編譯 crate 時，編譯器會先尋找 crate 源頭檔案（函式庫 crate 的話，通常就是 _src/lib.rs_；執行檔 crate 的話，通常就是 _src/main.rs_）來編譯程式碼。
- **宣告模組**：在 crate 源頭檔案中，你可以宣告新的模組，比如說你宣告了一個「garden」模組 `mod garden;`。編譯器會在以下這幾處尋找模組的程式碼：
  - 同檔案內用 `mod garden` 加上大括號，寫在括號內的程式碼
  - _src/garden.rs_ 檔案中
  - _src/garden/mod.rs_ 檔案中
- **宣告子模組**：除了 crate 源頭以外，其他檔案也可以宣告子模組。舉例來說，你可能會在 _src/garden.rs_ 中宣告個 `mod vegetables;`。編譯器會與當前模組同名的目錄底下這幾處尋找子模組的程式碼：
  - 同檔案內，直接用 `mod vegetables` 加上大括號，寫在括號內的程式碼
  - _src/garden/vegetables.rs_ 檔案中
  - _src/garden/vegetables/mod.rs_ 檔案中
- **模組的路徑**：一旦有個模組成為 crate 的一部分，只要隱私權規則允許，你可以在 crate 裡任何地方使用該模組的程式碼。舉例來說，「garden」模組底下的「vegetables」模組的 `Asparagus` 型別可以用 `crate::garden::vegetables::Asparagus` 來找到。
- **私有 vs 公開**：模組內的程式碼從上層模組來看預設是私有的。要公開的話，將它宣告為 `pub mod` 而非只是 `mod`。要讓公開模組內的項目也公開的話，在這些項目前面也加上 `pub` 即可。
- **`use` 關鍵字**：在一個作用域內，`use` 關鍵字可以建立項目的捷徑，來縮短冗長的路徑名稱。在任何能使用 `crate::garden::vegetables::Asparagus` 的作用域中，你可以透過 `use crate::garden::vegetables::Asparagus;` 來建立捷徑，接著你只需要寫 `Asparagus` 就能在作用域內使用該型別了。

這裡我們建立個執行檔 crate 叫做 `backyard` 來展示這些規則。Crate 的目錄也叫做 `backyard`，其中包含了這些檔案與目錄：

```text
backyard
├── Cargo.lock
├── Cargo.toml
└── src
    ├── garden
    │   └── vegetables.rs
    ├── garden.rs
    └── main.rs
```
