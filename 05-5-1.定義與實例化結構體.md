# 定義與實例化結構體 defining structs

User 結構體定義

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}

fn main() {}
```

產生一個 User 結構體的實例

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}

fn main() {
    let user1 = User {
        active: true,
        email: String::from("someone@example.com"),
        username: String::from("someusername123"),
        sign_in_count: 1,
    };
}
```

改變 User 中 email 欄位的值

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}

fn main() {
    let mut user1 = User {
        active: true,
        email: String::from("someone@example.com"),
        username: String::from("someusername123"),
        sign_in_count: 1,
    };

    user1.email = String::from("anotheremail@example.com");
}
```

build_user 函式取得電子郵件與使用者名稱並回傳 User 實例

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}

fn build_user(email: String, username: String) -> User {
    User {
        active: true,
        email: email,
        username: username,
        sign_in_count: 1,
    }
}

fn main() {
    let user1 = build_user(
        String::from("someone@example.com"),
        String::from("someusername123"),
    );
}
```

用欄位初始化簡寫語法

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}

fn build_user(email: String, username: String) -> User {
    User {
        active: true,
        email,
        username,
        sign_in_count: 1,
    }
}

fn main() {
    let user1 = build_user(
        String::from("someone@example.com"),
        String::from("someusername123"),
    );
}
```

使用結構體更新語法從其他結構體建立實例

從 user1 中建立新的 User 實例

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}

fn main() {
    // --省略--

    let user1 = User {
        email: String::from("someone@example.com"),
        username: String::from("someusername123"),
        active: true,
        sign_in_count: 1,
    };

    let user2 = User {
        active: user1.active,
        username: user1.username,
        email: String::from("another@example.com"),
        sign_in_count: user1.sign_in_count,
    };
}
```

對新的 User 實例設置新的 email 數值，但剩下就都使用 user1

產生的 user2 實例有不同 email，但是有與 user1 相同的 username、active 和 sign_in_count。..user1 加在最後面表示任何剩餘的欄位都會與 user1 對應欄位的數值相同，不過我們可以用任意順序指定多少想指定的欄位，不需要與結構體定義欄位的順序一樣。

注意到結構體更新語法和賦值一樣使用 =，這是因為它也會轉移資料

我們在建立 user2 之後就無法再使用 user1，因為 user1 的 username 欄位的 String 被移到 user2 了。如果我們同時給 user2 的 email 與 username 新的 String，這樣 user1 會用到的數值只會有 active 和 sign_in_count，這樣 user1 在 user2 就仍會有效。因為 active 和 sign_in_count 都是有實作 Copy 特徵的型別

```rust
struct User {
    active: bool,
    username: String,
    email: String,
    sign_in_count: u64,
}

fn main() {
    // --省略--

    let user1 = User {
        email: String::from("someone@example.com"),
        username: String::from("someusername123"),
        active: true,
        sign_in_count: 1,
    };

    let user2 = User {
        email: String::from("another@example.com"),
        ..user1
    };
}
```

使用無名稱欄位的元組結構體來建立不同型別

```rust
struct Color(i32, i32, i32);
struct Point(i32, i32, i32);

fn main() {
    let black = Color(0, 0, 0);
    let origin = Point(0, 0, 0);
}
```

無任何欄位的類單元結構體

```rust
struct AlwaysEqual;

fn main() {
    let subject = AlwaysEqual;
}

```
